<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>Alt Text Generator</title>
<meta name="viewport" content="width=device-width, initial-scale=1">

<style>
  body {
    font-family: system-ui, -apple-system, BlinkMacSystemFont, sans-serif;
    background: #f6f7f9;
    padding: 30px;
  }

  .container {
    max-width: 600px;
    margin: auto;
    background: #fff;
    padding: 24px;
    border-radius: 12px;
    box-shadow: 0 10px 30px rgba(0,0,0,0.08);
  }

  h1 {
    font-size: 22px;
    margin-bottom: 10px;
  }

  .paste-area {
    border: 2px dashed #ccc;
    padding: 30px;
    text-align: center;
    border-radius: 10px;
    color: #666;
    margin-bottom: 20px;
  }

  img {
    max-width: 100%;
    border-radius: 8px;
    margin-top: 10px;
  }

  textarea {
    width: 100%;
    min-height: 100px;
    margin-top: 15px;
    padding: 12px;
    font-size: 14px;
  }

  button {
    margin-top: 10px;
    padding: 10px 16px;
    border: none;
    background: #000;
    color: #fff;
    border-radius: 6px;
    cursor: pointer;
  }

  button:disabled {
    background: #888;
  }
</style>
</head>

<body>
<div class="container">
  <h1>Online Alt Text Generator</h1>
  <p>Paste an image from your clipboard (Ctrl + V)</p>

  <div class="paste-area" id="pasteArea">
    Paste image here
    <img id="preview" hidden>
  </div>

  <textarea id="altText" placeholder="Generated alt text will appear here..."></textarea>
  <button id="copyBtn" disabled>Copy Alt Text</button>
</div>

<script>
const OPENAI_API_KEY = "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";

const preview = document.getElementById("preview");
const altTextArea = document.getElementById("altText");
const copyBtn = document.getElementById("copyBtn");

document.addEventListener("paste", async (event) => {
  const item = [...event.clipboardData.items].find(i => i.type.includes("image"));
  if (!item) return;

  const file = item.getAsFile();
  const reader = new FileReader();

  reader.onload = async () => {
    preview.src = reader.result;
    preview.hidden = false;
    altTextArea.value = "Generating alt text...";
    copyBtn.disabled = true;

    const base64Image = reader.result.split(",")[1];
    await generateAltText(base64Image);
  };

  reader.readAsDataURL(file);
});

async function generateAltText(base64Image) {
  try {
    const response = await fetch("https://api.openai.com/v1/chat/completions", {
      method: "POST",
      headers: {
        "Content-Type": "application/json",
        "Authorization": `Bearer ${OPENAI_API_KEY}`
      },
      body: JSON.stringify({
        model: "gpt-4.1-mini",
        messages: [
          {
            role: "user",
            content: [
              { type: "text", text: "Generate concise, descriptive alt text for accessibility. Max 125 characters." },
              {
                type: "image_url",
                image_url: {
                  url: `data:image/png;base64,${base64Image}`
                }
              }
            ]
          }
        ],
        max_tokens: 100
      })
    });

    const data = await response.json();
    const altText = data.choices[0].message.content;

    altTextArea.value = altText;
    copyBtn.disabled = false;

  } catch (error) {
    altTextArea.value = "Error generating alt text.";
    console.error(error);
  }
}

copyBtn.addEventListener("click", () => {
  altTextArea.select();
  document.execCommand("copy");
  copyBtn.textContent = "Copied!";
  setTimeout(() => copyBtn.textContent = "Copy Alt Text", 1500);
});
</script>
</body>
</html>
